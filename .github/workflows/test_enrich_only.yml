name: âš¡ æ¸¬è©¦ï¼šåƒ…åŸ·è¡Œèªæ„å¢å¼· (Enrich Only)

on:
  workflow_dispatch: # ç´”æ‰‹å‹•è§¸ç™¼

permissions:
  contents: write

jobs:
  test-enrich:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        
      - name: Python Setup
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
          
      - name: Install
        run: pip install google-genai google-generativeai
        
      - name: Run Enrich
        env:
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
        run: |
          echo "ğŸ§ª é–‹å§‹æ¸¬è©¦ AI æ¨™ç±¤ç”Ÿæˆ..."
          python enrich_data.py
          
      - name: Commit Result
        run: |
          git config --global user.name "GitHub Action Bot"
          git config --global user.email "actions@github.com"
          git add nihs_knowledge_full.json
          if git commit -m "Test: AI Data Enrichment"; then
            git push
            echo "âœ… æ¸¬è©¦æˆåŠŸï¼Œè³‡æ–™å·²æ›´æ–°ï¼"
          else
            echo "âš ï¸ æ²’æœ‰è³‡æ–™è¢«ä¿®æ”¹ (å¯èƒ½æ˜¯æ‰€æœ‰è³‡æ–™éƒ½æœ‰æ¨™ç±¤äº†)"
          fi
